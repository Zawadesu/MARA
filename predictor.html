<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARA Predictor</title>

    <!-- PyScript CSS -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <!-- awesome font link-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- css file link -->
    <link rel="stylesheet" href="predictor/predictor.css">
    <!-- PyScript resource -->
    <!-- This script tag bootstraps PyScript -->
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <!-- for splashscreen -->
    <style>
        #loading { outline: none; border: none; background: transparent }
    </style>
    <script type="module">
        const loading = document.getElementById('loading');
        addEventListener('py:ready', () => loading.close());
        loading.showModal();
    </script>

</head>
<body>

<!-- header section starts-->
<header class="header">

    <a href="#" class="logo">
        <img src="images/logo.png" alt="">
    </a>

    <nav class="navbar">
        <ul>
            <li><a href="mara.html">Home</a></li>
            <li><a href="pathways.html">Pathways</a></li>
            <li><a href="#predictor">Predictor</a></li>
            <li><a href="genes.html">Genes</a></li>
            <li><a href="future.html">Future</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>   
    </nav>

    <div class="icons">
        <div class="fas fa-search" id="search-btn"></div>
        <div class="fas fa-globe" id="globe-btn"></div>
        <div class="fas fa-bars" id="menu-btn"></div>
    </div>

    <div class="search-form">
        <input type="search" id="search-btn" placeholder="Type a gene symbol...">
        <label for="search-box" class="fas fa-search"></label>
    </div>
</header>

<!-- header section ends-->
<div class="bg"></div>
<div class="bg bg2"></div>
<div class="bg bg3"></div>

<!-- intro section starts -->
<section class="guidance" id="guidance">

    <h1 class="heading">guidance</h1>
        
    <div class="intro">
        <p>MARA is a python-based tool, using a hybrid model consisting of genetic 
            programming (GP) algorithm and a deep learning method neural network (NN). 
            To learn more about the GPNN model, please view the details (link) of the
            model part at the bottom.
        </p>
        <p>To use the model, please click on the organ of interest, and then enter your 
            age. It may take a few moments to get the results.
        </p>
        <p><span>NOTE:</span> the unit is TPM (Transcript per Kilobase per Million mapped reads, a 
            commonly used unit of gene expression levels) and data is processed in 
            log_2(tpm+0.001) form. 
        </p>

    </div>

</section>

<!-- intro section ends -->

<!-- model section starts -->
<section class="model" id="model">

    <h1 class="heading">predictor</h1>

    <div class="container">
        <div class="organ-diagram">
            <!-- human structure -->
            <div style="position: relative;">
                <img src="images/humanbody.png" width="500">
                
                <div class="organ-area" id="liver"
                    onclick="selectOrgan('liver')"
                    onmouseover="highlightsaOrgan('liver')"
                    onmouseout="resetOrgan('liver')">

                    <img src="images/liver.png">

                </div>
            </div>
        </div>

        <div class="info-panel" id="info-panel">
            <div id="default-message">
                <h3>Please choose an organ</h3>
                <img src="images/logo.png">
            </div>

            <div id="input-section" class="hidden">
                <h3>Prediction settings</h3>
                <div>
                    <label>Age: </label>
                    <input type="number" id="age" placeholder="Enter an age between 40 - 69" min="40" max="69">
            
                    <label>Sex: </label>
                    <input type="sex" id="sex" placeholder="Enter 'male' or 'female'">
                </div>
                <button id="run-btn" type ="submit" py-click="predict()">Predict now!</button>

        <div id="list-container"></div>
            <template id="gene-template">
                <section class="gene py-li-element">
                    <label class="flex items-center p-2">
                        <p style="display: inline;"></p>
                    </label>
                </section>
            </template>
        <script type="py" src="./main.py" config="./pyscript.toml"></script>
                <!-- loading status-->
                <div id="loading"></div>

                <div id="result"></div>

                <div id="loading" class="spinner-border"></div>
                <div id="model-container"></div>
            </div>
        </div>
    </div>
    
    
</section>

<!-- model section ends -->

<!-- footer section starts -->

<section class="footer">
    
    <div class="ack">
        <h3>acknowledgement</h3>
        <p>Sincere gratitude to Professor Xiu-jie Wang for her tutelage.</p>
    </div>

    <div class="credit">Created by <span>Oren</span> | All Rights Reserved</div>
</section>
<!-- footer section ends -->
  

<script src="predictor/predictor.js"></script>

</body>
</html>